{"type":"operationStart","subtype":"profile","data":{"_id":"lVzpAThUMsfB8nze","timestamp":"2024-01-15T10:17:54.138Z","state":"queued","mode":"standard","creationDate":"2024-01-15T10:17:54.144Z","modificationDate":"2024-01-15T10:17:54.144Z","shortid":"Ev2dcvY","$entitySet":"profiles"},"doDiffs":false,"timestamp":1705313874142,"id":"xg3j8juyt71gf26","previousOperationId":null,"operationId":"cglxffile9yjddk"}
{"type":"log","level":"info","message":"Render request 26 queued for execution and waiting for available worker","previousOperationId":"cglxffile9yjddk","timestamp":1705313874142,"id":"px2czd6jjjo4asg"}
{"type":"operationStart","subtype":"render","name":"locations-main","previousOperationId":"cglxffile9yjddk","timestamp":1705313874175,"id":"ozxbbw0vebrmqg3","previousEventId":"xg3j8juyt71gf26","operationId":"hhofe5x59rvflbg"}
{"type":"log","timestamp":1705313874175,"level":"info","message":"Starting rendering request 26","meta":{"rootId":"n47bktkczg0uz1t","id":"n47bktkczg0uz1t"},"id":"rszvn7rh34xm6zw","previousOperationId":"hhofe5x59rvflbg"}
{"type":"log","timestamp":1705313874175,"level":"info","message":"Rendering template { name: locations-main, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"n47bktkczg0uz1t","id":"n47bktkczg0uz1t"},"id":"34a3zfceu545pg2","previousOperationId":"hhofe5x59rvflbg"}
{"type":"log","timestamp":1705313874178,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"n47bktkczg0uz1t","id":"n47bktkczg0uz1t"},"id":"k1zip6i97u2lwn2","previousOperationId":"hhofe5x59rvflbg"}
{"type":"log","timestamp":1705313874196,"level":"debug","message":"Executing script locations-script (beforeRender)","meta":{"rootId":"n47bktkczg0uz1t","id":"n47bktkczg0uz1t"},"id":"dk7yxx0ua7o90p5","previousOperationId":"hhofe5x59rvflbg"}
{"type":"operationStart","subtype":"scriptsBeforeRender","name":"scripts beforeRender","timestamp":1705313874211,"id":"ekdzdcsoc3qrw3c","previousEventId":"ozxbbw0vebrmqg3","operationId":"iyn9bq2gu9vpuk5","previousOperationId":"hhofe5x59rvflbg"}
{"type":"operationStart","subtype":"script","name":"scripts locations-script","previousOperationId":"iyn9bq2gu9vpuk5","timestamp":1705313874211,"id":"mwqg4rxp9a0kfk7","previousEventId":"ekdzdcsoc3qrw3c","operationId":"l1e3aqnbkjorsm2"}
{"type":"operationEnd","operationId":"l1e3aqnbkjorsm2","timestamp":1705313874238,"id":"7fdd59i8ffdk3ey","previousEventId":"ozxbbw0vebrmqg3","previousOperationId":"hhofe5x59rvflbg"}
{"type":"operationEnd","operationId":"iyn9bq2gu9vpuk5","timestamp":1705313874238,"id":"70cx9u2mtoj8lwk","previousEventId":"7fdd59i8ffdk3ey","previousOperationId":"hhofe5x59rvflbg"}
{"type":"log","timestamp":1705313874238,"level":"debug","message":"Base url not specified, skipping its injection.","meta":{"rootId":"n47bktkczg0uz1t","id":"n47bktkczg0uz1t"},"id":"6nklbr13hvmbe7p","previousOperationId":"iyn9bq2gu9vpuk5"}
{"type":"operationStart","subtype":"engine","name":"handlebars","timestamp":1705313874238,"id":"mfurwx4h1ihqv30","previousEventId":"70cx9u2mtoj8lwk","operationId":"rnysvnony6t8utw","previousOperationId":"iyn9bq2gu9vpuk5"}
{"type":"log","timestamp":1705313874238,"level":"debug","message":"Rendering engine handlebars","meta":{"rootId":"n47bktkczg0uz1t","id":"n47bktkczg0uz1t"},"id":"ciqrnrl4p9gbsjg","previousOperationId":"rnysvnony6t8utw"}
{"type":"log","timestamp":1705313874347,"level":"warn","message":"Error when processing render request 26\n(because) error when evaluating engine handlebars for template /samples/Locations/locations-main\n(because) must pass iterator to #each\n\n(sandbox.js line 13:18)\nError: Must pass iterator to #each\n    at Object.<anonymous> (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:17:13)\n    at Object.wrapper (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at Object.main (eval at compile (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:66:49)\n    at main (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:208:32)\n    at ret (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:212:12)\n    at Object.execute (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:80:14)\n    at Object.execute (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\worker.js:27:43)\n    at executionFn (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:222:40)\n    at sandbox.js:13:18\n    at async run (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:137:16)\nwrapped by:\nError: Error when evaluating engine handlebars for template /samples/Locations/locations-main\n(because) must pass iterator to #each\n    at module.exports (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:310:33)\n    at async engine.engine (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:61:23)\n    at async WorkerReporter._render (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:142:7)\n    at async C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:224:19\n    at async processAndResponse (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\advanced-workers\\lib\\workerHandler.js:41:17)","meta":{"rootId":"n47bktkczg0uz1t","id":"n47bktkczg0uz1t"},"id":"kzu8nwneyifi0iu","previousOperationId":"rnysvnony6t8utw"}
{"type":"log","timestamp":1705313874348,"level":"warn","message":"Rendering request 26 finished with error in 210 ms","meta":{"rootId":"n47bktkczg0uz1t","id":"n47bktkczg0uz1t"},"id":"8wu98b17qihna28","previousOperationId":"rnysvnony6t8utw"}
{"type":"error","timestamp":1705313874370,"entity":{"shortid":"HJH11D83ce","name":"locations-main","content":"<!DOCTYPE html>\n<html lang=\"es\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Gráfico con Datos de la Base de Datos</title>\n  <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\n</head>\n<body>\n  {{#each}}\n   <table class=\"table striped\">\n      <thead>\n        <tr>\n          <th>Nombre</th>\n          <th>Nº de eventos</th>\n        </tr>\n      </thead>\n      <tbody>\n          <tr>\n            <td>{{name}}</td>\n            <td>{{numEventos}}</td>\n          </tr>\n      </tbody>\n    </table>\n  {{/each}}\n  {{#each locations}}\n    <!-- Utiliza un ID único para cada gráfico -->\n    <canvas id=\"miGrafico{{@index}}\" width=\"400\" height=\"200\"></canvas>\n   \n    <script>\n      // Obtener el contexto del lienzo\n      var ctx{{@index}} = document.getElementById('miGrafico{{@index}}').getContext('2d');\n\n      // Datos recibidos del servidor (simulados)\n      var datosDesdeServidor{{@index}} = [\n        { numEvento: numEventos, name: name },\n        { numEvento: numEventos, name: name }\n      ];\n\n      // Procesar datos para el gráfico\n      var labels{{@index}} = datosDesdeServidor{{@index}}.map(function (dato) {\n        return dato.name;\n      });\n\n      var valores{{@index}} = datosDesdeServidor{{@index}}.map(function (dato) {\n        return dato.numEvento;\n      });\n\n      // Datos para el gráfico de barras\n      var data{{@index}} = {\n        labels: labels{{@index}},\n        datasets: [{\n          label: 'Número de Eventos',\n          data: valores{{@index}},\n          backgroundColor: ['red', 'blue'], // Puedes personalizar los colores\n        }]\n      };\n\n      // Configuración del gráfico\n      var options{{@index}} = {\n        responsive: true,\n        maintainAspectRatio: false\n      };\n\n      // Crear el gráfico de barras\n      var myBarChart{{@index}} = new Chart(ctx{{@index}}, {\n        type: 'bar',\n        data: data{{@index}},\n        options: options{{@index}}\n      });\n    </script>\n  {{/each}}\n</body>\n</html>\n"},"property":"helpers","statusCode":400,"weak":true,"logged":true,"previousOperationId":"rnysvnony6t8utw","id":"zu0j1tjws57djvd","stack":"Error: Must pass iterator to #each\n    at Object.<anonymous> (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:17:13)\n    at Object.wrapper (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at Object.main (eval at compile (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:66:49)\n    at main (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:208:32)\n    at ret (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:212:12)\n    at Object.execute (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:80:14)\n    at Object.execute (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\worker.js:27:43)\n    at executionFn (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:222:40)\n    at sandbox.js:13:18\n    at async run (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:137:16)\nwrapped by:\nError: Error when evaluating engine handlebars for template /samples/Locations/locations-main\n(because) must pass iterator to #each\n    at module.exports (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:310:33)\n    at async engine.engine (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:61:23)\n    at async WorkerReporter._render (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:142:7)\n    at async C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:224:19\n    at async processAndResponse (C:\\Users\\arida\\Dev\\2DAM\\EventFlow\\jsreportapp\\node_modules\\@jsreport\\advanced-workers\\lib\\workerHandler.js:41:17)","message":"Error when evaluating engine handlebars for template /samples/Locations/locations-main\n(because) must pass iterator to #each\n\n(sandbox.js line 13:18)"}
